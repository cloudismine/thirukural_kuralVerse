import mongoose from 'mongoose';
import Kural from '../models/Kural.js';
import dotenv from 'dotenv';

dotenv.config();

// Sample Kurals data for testing (first 10 Kurals from Aram section)
const sampleKurals = [
  {
    number: 1,
    paal: 'роЕро▒роорпН',
    adhigaram_no: 1,
    adhigaram: 'роХроЯро╡рпБро│рпН ро╡ро╛ро┤рпНродрпНродрпБ',
    kural_index: 1,
    line1: 'роЕроХро░ роорпБродро▓ роОро┤рпБродрпНродрпЖро▓рпНро▓ро╛роорпН роЖродро┐',
    line2: 'рокроХро╡ройрпН роорпБродро▒рпНро▒рпЗ роЙро▓роХрпБ',
    transliteration: 'Agara mudala ezhuththellaam aadhi\nBhagavan mudhatre ulagu',
    meaning_ta: 'роОро┤рпБродрпНродрпБроХрпНроХро│рпН роОро▓рпНро▓ро╛роорпН роЕроХро░родрпНродрпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯро┐ро░рпБрокрпНрокродрпБ рокрпЛро▓рпН, роЙро▓роХроорпН роХроЯро╡рпБро│рпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро┐ро▒родрпБ.',
    meaning_en: 'As the letter A is the first of all letters, so the eternal God is first and foremost in the world.',
    commentary_parimel: 'роОро┤рпБродрпНродрпБроХрпНроХро│рпБроХрпНроХрпЖро▓рпНро▓ро╛роорпН роЕроХро░роорпН роорпБродройрпНроорпИропро╛ройродрпБ рокрпЛро▓, роЙро▓роХродрпНродро┐ро▒рпНроХрпБ роЗро▒рпИро╡ройрпН роорпБродройрпНроорпИропро╛ройро╡ройрпН роОройрпНрокродрпБ роЗроХрпНроХрпБро▒ро│ро┐ройрпН рокрпКро░рпБро│рпН.',
    commentary_karunanidhi: 'роЕроХро░роорпН роОро┤рпБродрпНродрпБроХрпНроХро│ро┐ройрпН родро▓рпИро╡ройрпН. роЕродрпБрокрпЛро▓рпН роХроЯро╡рпБро│рпН роЙро▓роХро┐ройрпН родро▓рпИро╡ройрпН.',
    commentary_yogi: 'роорпБродро▓рпН роОро┤рпБродрпНродро╛рой роЕроХро░родрпНродрпИрокрпН рокрпЛро▓, роХроЯро╡рпБро│рпН роЙро▓роХро┐ройрпН роорпБродро▓рпН роХро╛ро░рогроорпН.'
  },
  {
    number: 2,
    paal: 'роЕро▒роорпН',
    adhigaram_no: 1,
    adhigaram: 'роХроЯро╡рпБро│рпН ро╡ро╛ро┤рпНродрпНродрпБ',
    kural_index: 2,
    line1: 'роХро▒рпНро▒родройро╛ро▓рпН роЖроп рокропройрпЖройрпНроХрпКро▓рпН ро╡ро╛ро▓ро▒ро┐ро╡ройрпН',
    line2: 'роиро▒рпНро▒ро╛ро│рпН родрпКро┤ро╛роЕро░рпН роОройро┐ройрпН',
    transliteration: 'Katradhanaal aaya payanen kol vaalariwan\nNatraal thozhaaar enin',
    meaning_ta: 'роЪро┐ро▒роирпНрод роЕро▒ро┐ро╡рпБроЯрпИропро╡ройрпН роХро▒рпНро▒ роХро▓рпНро╡ро┐ропро╛ро▓рпН рокропройрпН роОройрпНрой, роЕро╡ройрпН роЗро▒рпИро╡ройро┐ройрпН родро┐ро░рпБро╡роЯро┐роХро│рпИ ро╡рогроЩрпНроХро╛ро╡ро┐роЯрпНроЯро╛ро▓рпН?',
    meaning_en: 'What avails learning if the learned one does not worship the good feet of Him who has pure knowledge?',
    commentary_parimel: 'роорпБро┤рпБроорпИропро╛рой роЕро▒ро┐ро╡рпБроЯрпИроп роЗро▒рпИро╡ройро┐ройрпН родро┐ро░рпБро╡роЯро┐роХро│рпИ ро╡рогроЩрпНроХро╛род роХро▒рпНро▒ро╡ройро┐ройрпН роХро▓рпНро╡ро┐ рокропройро▒рпНро▒родрпБ.',
    commentary_karunanidhi: 'роХроЯро╡рпБро│рпИ ро╡рогроЩрпНроХро╛род роХро▓рпНро╡ро┐ ро╡рпАрогро╛ройродрпБ.',
    commentary_yogi: 'роЗро▒рпИро╡рогроХрпНроХроорпН роЗро▓рпНро▓ро╛род роХро▓рпНро╡ро┐ рокропройро▒рпНро▒родрпБ.'
  },
  {
    number: 3,
    paal: 'роЕро▒роорпН',
    adhigaram_no: 1,
    adhigaram: 'роХроЯро╡рпБро│рпН ро╡ро╛ро┤рпНродрпНродрпБ',
    kural_index: 3,
    line1: 'рооро▓ро░рпНрооро┐роЪрпИ роПроХро┐ройро╛ройрпН рооро╛рогроЯро┐ роЪрпЗро░рпНроирпНродро╛ро░рпН',
    line2: 'роиро┐ро▓рооро┐роЪрпИ роирпАроЯрпБро╡ро╛ро┤рпН ро╡ро╛ро░рпН',
    transliteration: 'Malarmisai ekinaan maanadi serndhar\nNilamisa needuvazh vaar',
    meaning_ta: 'родро╛рооро░рпИ рооро▓ро░ро┐ро▓рпН ро╡рпАро▒рпНро▒ро┐ро░рпБроХрпНроХрпБроорпН роЗро▒рпИро╡ройро┐ройрпН роЪро┐ро▒роирпНрод родро┐ро░рпБро╡роЯро┐роХро│рпИ роЕроЯрпИроирпНродро╡ро░рпНроХро│рпН роЗроирпНрод роЙро▓роХро┐ро▓рпН роирпАрогрпНроЯ роХро╛ро▓роорпН ро╡ро╛ро┤рпНро╡ро╛ро░рпНроХро│рпН.',
    meaning_en: 'Those who have reached the excellent feet of Him who walks on the flower (lotus) will live long on this earth.',
    commentary_parimel: 'родро╛рооро░рпИ рооро▓ро░ро┐ро▓рпН ро╡рпАро▒рпНро▒ро┐ро░рпБроХрпНроХрпБроорпН роЗро▒рпИро╡ройро┐ройрпН родро┐ро░рпБро╡роЯро┐роХро│рпИ роЕроЯрпИроирпНродро╡ро░рпНроХро│рпН роирпАрогрпНроЯ роЖропрпБро│рпБроЯройрпН ро╡ро╛ро┤рпНро╡ро╛ро░рпНроХро│рпН.',
    commentary_karunanidhi: 'роЗро▒рпИро╡ройро┐ройрпН роЕро░рпБро│рпИрокрпН рокрпЖро▒рпНро▒ро╡ро░рпНроХро│рпН роирпАрогрпНроЯ роХро╛ро▓роорпН ро╡ро╛ро┤рпНро╡ро╛ро░рпНроХро│рпН.',
    commentary_yogi: 'роЗро▒рпИро╡ройро┐ройрпН родро┐ро░рпБро╡роЯро┐роХро│рпИ роЕроЯрпИроирпНродро╡ро░рпНроХро│рпН роирпАрогрпНроЯ роЖропрпБро│рпН рокрпЖро▒рпБро╡ро╛ро░рпНроХро│рпН.'
  },
  {
    number: 4,
    paal: 'роЕро▒роорпН',
    adhigaram_no: 1,
    adhigaram: 'роХроЯро╡рпБро│рпН ро╡ро╛ро┤рпНродрпНродрпБ',
    kural_index: 4,
    line1: 'ро╡рпЗрогрпНроЯрпБродро▓рпН ро╡рпЗрогрпНроЯро╛роорпИ роЗро▓ро╛родро╛ройрпН роЗроЯрпИроЪрпЖропрпНрод',
    line2: 'роирпАрогрпНроЯрпБродро▓рпН ро╡рпЗрогрпНроЯро╛ родрпБро▓роХрпБ',
    transliteration: 'Vendudhal vendaamai ilaathaan idaiseytha\nNeendudhal vendaa dhulagu',
    meaning_ta: 'ро╡ро┐ро░рпБрокрпНрокрпБ ро╡рпЖро▒рпБрокрпНрокрпБ роЗро▓рпНро▓ро╛род роЗро▒рпИро╡ройрпН рокроЯрпИродрпНрод роЗроирпНрод роЙро▓роХроорпН роирпАрогрпНроЯ роХро╛ро▓роорпН роиро┐ро▓рпИродрпНродро┐ро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒рпБ ро╡ро┐ро░рпБроорпНрокрпБро╡родро┐ро▓рпНро▓рпИ.',
    meaning_en: 'The world does not desire to be prolonged, which is created by Him who is free from desire and aversion.',
    commentary_parimel: 'ро╡ро┐ро░рпБрокрпНрокрпБ ро╡рпЖро▒рпБрокрпНрокрпБ роЗро▓рпНро▓ро╛род роЗро▒рпИро╡ройрпН рокроЯрпИродрпНрод роЙро▓роХроорпН родро╛ройро╛роХро╡рпЗ роиро┐ро▓рпИродрпНродро┐ро░рпБроХрпНроХрпБроорпН.',
    commentary_karunanidhi: 'роЗро▒рпИро╡ройрпН рокроЯрпИродрпНрод роЙро▓роХроорпН родро╛ройро╛роХро╡рпЗ роиро┐ро▓рпИродрпНродро┐ро░рпБроХрпНроХрпБроорпН.',
    commentary_yogi: 'роЗро▒рпИро╡ройро┐ройрпН рокроЯрпИрокрпНрокрпБ родро╛ройро╛роХро╡рпЗ роиро┐ро▓рпИродрпНродро┐ро░рпБроХрпНроХрпБроорпН.'
  },
  {
    number: 5,
    paal: 'роЕро▒роорпН',
    adhigaram_no: 1,
    adhigaram: 'роХроЯро╡рпБро│рпН ро╡ро╛ро┤рпНродрпНродрпБ',
    kural_index: 5,
    line1: 'роЗро░рпБро│рпНроЪрпЗро░рпН роЗро░рпБро╡ро┐ройрпИропрпБроорпН роЪрпЗро░ро╛ роЗро▒рпИро╡ройрпН',
    line2: 'рокрпКро░рпБро│рпНроЪрпЗро░рпН рокрпБроХро┤рпНрокрпБро░ро┐роирпНродро╛ро░рпН рооро╛роЯрпНроЯрпБ',
    transliteration: 'Irulsaer iruvinayum saeraa iraivan\nPorulsaer pugazhpurindhar maattu',
    meaning_ta: 'роЗро▒рпИро╡ройро┐ройрпН рокрпКро░рпБро│рпБроЯрпИроп рокрпБроХро┤рпИ рооройродро┐ро▓рпН роХрпКрогрпНроЯро╡ро░рпНроХро│ро┐роЯроорпН роЗро░рпБро│рпИродрпН родро░рпБроорпН роЗро░рпБ ро╡ро┐ройрпИроХро│рпБроорпН (рокро╛ро╡ рокрпБрогрпНрогро┐ропроЩрпНроХро│рпБроорпН) роЪрпЗро░ро╛родрпБ.',
    meaning_en: 'The two dark deeds (sin and virtue) will not adhere to those who have enshrined in their hearts the glory of God.',
    commentary_parimel: 'роЗро▒рпИро╡ройро┐ройрпН рокрпБроХро┤рпИ рооройродро┐ро▓рпН роХрпКрогрпНроЯро╡ро░рпНроХро│рпБроХрпНроХрпБ рокро╛ро╡ рокрпБрогрпНрогро┐ропроЩрпНроХро│рпН рокро╛родро┐рокрпНрокрпБ родро░ро╛родрпБ.',
    commentary_karunanidhi: 'роЗро▒рпИро╡ройрпИ ро╡рогроЩрпНроХрпБрокро╡ро░рпНроХро│рпБроХрпНроХрпБ рокро╛ро╡ рокрпБрогрпНрогро┐ропроЩрпНроХро│рпН родрпАроЩрпНроХрпБ роЪрпЖропрпНропро╛родрпБ.',
    commentary_yogi: 'роЗро▒рпИро╡ройро┐ройрпН роЕро░рпБро│рпИрокрпН рокрпЖро▒рпНро▒ро╡ро░рпНроХро│рпБроХрпНроХрпБ роХро░рпНроо рокро▓ройрпНроХро│рпН рокро╛родро┐рокрпНрокрпБ родро░ро╛родрпБ.'
  }
];

// Function to seed sample data
export const seedSampleData = async () => {
  try {
    console.log('ЁЯМ▒ Starting data seeding...');
    
    // Connect to MongoDB if not already connected
    if (mongoose.connection.readyState === 0) {
      await mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/kuralverse');
      console.log('тЬЕ Connected to MongoDB for seeding');
    }
    
    // Clear existing data
    await Kural.deleteMany({});
    console.log('ЁЯЧСя╕П Cleared existing Kural data');
    
    // Insert sample data
    const insertedKurals = await Kural.insertMany(sampleKurals);
    console.log(`тЬЕ Inserted ${insertedKurals.length} sample Kurals`);
    
    // Create text indexes
    await Kural.collection.createIndex({
      line1: 'text',
      line2: 'text',
      meaning_ta: 'text',
      meaning_en: 'text',
      commentary_parimel: 'text',
      commentary_karunanidhi: 'text',
      commentary_yogi: 'text',
      transliteration: 'text'
    });
    console.log('тЬЕ Created text search indexes');
    
    console.log('ЁЯОЙ Data seeding completed successfully!');
    
    return insertedKurals;
  } catch (error) {
    console.error('тЭМ Error seeding data:', error);
    throw error;
  }
};

// Function to generate more sample data (for development)
export const generateMoreSampleData = () => {
  const paals = ['роЕро▒роорпН', 'рокрпКро░рпБро│рпН', 'роЗройрпНрокроорпН'];
  const adhigarams = {
    'роЕро▒роорпН': [
      'роХроЯро╡рпБро│рпН ро╡ро╛ро┤рпНродрпНродрпБ', 'ро╡ро╛ройрпНроЪро┐ро▒рокрпНрокрпБ', 'роирпАродрпНродро╛ро░рпН рокрпЖро░рпБроорпИ', 'роЕро▒ройрпНро╡ро▓ро┐ропрпБро▒рпБродрпНродро▓рпН',
      'роЗро▓рпНро╡ро╛ро┤рпНроХрпНроХрпИ', 'ро╡ро╛ро┤рпНроХрпНроХрпИродрпН родрпБрогрпИроиро▓роорпН', 'рокрпБродро▓рпНро╡ро░рпИрокрпН рокрпЖро▒рпБродро▓рпН', 'роЕройрпНрокрпБроЯрпИроорпИ',
      'ро╡ро┐ро░рпБроирпНродрпЛроорпНрокро▓рпН', 'роЗройро┐ропро╡рпИроХрпВро▒ро▓рпН', 'роЪрпЖропрпНроирпНроиройрпНро▒ро┐ роЕро▒ро┐родро▓рпН', 'роироЯрпБро╡рпБроиро┐ро▓рпИроорпИ',
      'роЕроЯроХрпНроХроорпБроЯрпИроорпИ', 'роТро┤рпБроХрпНроХроорпБроЯрпИроорпИ'
    ],
    'рокрпКро░рпБро│рпН': [
      'роЗро▒рпИрооро╛роЯрпНроЪро┐', 'роХро▓рпНро╡ро┐', 'роиро╛роЯрпБ', 'роЕро░рогрпН', 'роироЯрпНрокрпБ', 'рокроЯрпИрооро╛роЯрпНроЪро┐', 'роХрпБроЯро┐роорпИ',
      'роЙро┤ро╡рпБ', 'роиро▓рпНроХрпБро░ро╡рпБ', 'роЗро░ро╡рпБ', 'роХропроорпИ', 'роиройрпНро▒ро┐ропро┐ро▓рпНроЪрпЖро▓рпНро╡роорпН', 'роЗройрпНройро╛роЪрпЖропрпНропро╛роорпИ'
    ],
    'роЗройрпНрокроорпН': [
      'роХро│ро╡рпБ', 'роХро▒рпНрокрпБ', 'роиро▓роорпНрокрпБройрпИроирпНродрпБро░рпИродрпНродро▓рпН', 'роХро╛родро▒рпНроЪро┐ро▒рокрпНрокрпБро░рпИродрпНродро▓рпН', 'роиро╛рогрпБродрпНродрпБро▒ро╡рпБро░рпИродрпНродро▓рпН',
      'роЕро▓ро░рпНроЕро▒ро┐ро╡рпБро▒рпБродрпНродро▓рпН', 'рокро┐ро░ро┐ро╡ро╛ро▒рпНро▒ро╛роорпИ', 'рокроЯро░рпНроорпЖро▓ро┐роирпНродро┐ро░роЩрпНроХро▓рпН', 'роХрогрпНро╡ро┐родрпБрокрпНрокро┤ро┐родро▓рпН',
      'рокроЪрокрпНрокрпБро▒рпБрокро░рпБро╡ро░ро▓рпН', 'родройро┐рокрпНрокроЯро░рпНрооро┐роХрпБродро┐', 'роиро┐ройрпИроирпНродро╡ро░рпНрокрпБро▓роорпНрокро▓рпН', 'роХройро╡рпБроиро┐ро▓рпИропрпБро░рпИродрпНродро▓рпН',
      'рокрпКро┤рпБродрпБроХрогрпНроЯро┐ро░роЩрпНроХро▓рпН', 'роЙро▒рпБрокрпНрокрпБ роиро▓ройро┤ро┐родро▓рпН'
    ]
  };
  
  const moreKurals = [];
  let kuralNumber = 6;
  
  for (let i = 0; i < 20; i++) {
    const paal = paals[Math.floor(Math.random() * paals.length)];
    const adhigaramList = adhigarams[paal];
    const adhigaram = adhigaramList[Math.floor(Math.random() * adhigaramList.length)];
    
    moreKurals.push({
      number: kuralNumber++,
      paal,
      adhigaram_no: Math.floor(Math.random() * 10) + 1,
      adhigaram,
      kural_index: Math.floor(Math.random() * 10) + 1,
      line1: `Sample Tamil line 1 for Kural ${kuralNumber - 1}`,
      line2: `Sample Tamil line 2 for Kural ${kuralNumber - 1}`,
      transliteration: `Sample transliteration for Kural ${kuralNumber - 1}`,
      meaning_ta: `роЗродрпБ ${kuralNumber - 1}ро╡родрпБ роХрпБро▒ро│ро┐ройрпН родрооро┐ро┤рпН рокрпКро░рпБро│рпН.`,
      meaning_en: `This is the English meaning for Kural ${kuralNumber - 1}.`,
      commentary_parimel: `рокро░ро┐роорпЗро▓ро┤роХро░рпН роЙро░рпИ for Kural ${kuralNumber - 1}.`,
      commentary_karunanidhi: `роХро░рпБрогро╛роиро┐родро┐ роЙро░рпИ for Kural ${kuralNumber - 1}.`,
      commentary_yogi: `ропрпЛроХро┐ роЙро░рпИ for Kural ${kuralNumber - 1}.`
    });
  }
  
  return moreKurals;
};

// CLI script to run seeding
if (process.argv[2] === 'seed') {
  seedSampleData()
    .then(() => {
      console.log('тЬЕ Seeding completed');
      process.exit(0);
    })
    .catch((error) => {
      console.error('тЭМ Seeding failed:', error);
      process.exit(1);
    });
}
